<?xml version="1.0" encoding="utf-8"?>
<databaseChangeLog
	xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog 
http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.4.xsd">

	<property name="autoIncrement" value="true" />

	<!-- The initial schema. -->
	<changeSet id="01" author="CHARAF">

		<createTable tableName="CUSTOMER">
			<column name="customer_id" type="bigint"
				autoIncrement="${autoIncrement}">
				<constraints primaryKey="true" nullable="false" />
			</column>
			<column name="name" type="varchar(100)" />
			<column name="surname" type="varchar(100)" />
			<column name="adresse" type="VARCHAR(100)" />
		</createTable>

		<createTable tableName="ACCOUNT">
			<column name="account_id" type="bigint"
				autoIncrement="${autoIncrement}">
				<constraints primaryKey="true" nullable="false" />
			</column>
			<column name="title" type="varchar(100)" />
			<column name="description" type="varchar(100)" />
			<column name="creation_date" type="date" />
			<column name="is_closed" type="boolean" />
			<column name="customer_id" type="bigint"/>
		</createTable>
		
		<createTable tableName="TRANSACTION">
			<column name="transaction_id" type="bigint"
				autoIncrement="${autoIncrement}">
				<constraints primaryKey="true" nullable="false" />
			</column>
			<column name="description" type="varchar(100)" />
			<column name="transaction_type" type="boolean" />
			<column name="balance" type="bigint"/>
			<column name="account_id" type="bigint"/>
		</createTable>

		

		<loadData file="config/liquibase/changelog/csv/customers.csv"
			relativeToChangelogFile="false" separator="," tableName="CUSTOMER">
		</loadData>
		<loadData file="config/liquibase/changelog/csv/accounts.csv"
			relativeToChangelogFile="false" separator="," tableName="ACCOUNT">
		</loadData>
		<loadData file="config/liquibase/changelog/csv/transactions.csv"
			relativeToChangelogFile="false" separator="," tableName="TRANSACTION">
		</loadData>

	</changeSet>

</databaseChangeLog>